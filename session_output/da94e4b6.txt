
 ▐▛███▜▌   Claude Code v2.0.36
▝▜█████▛▘  Sonnet 4.5 · Claude API
  ▘▘ ▝▝    /home/morriz/apps/TeleClaude

> What are the main Python files in this TeleClaude project and what does 
each one do? 

● I'll explore the main Python files in the TeleClaude project to understand
   their purposes.

● Search(pattern: "**/*.py")
  ⎿  Found 67 files (ctrl+o to expand)

● Let me read the key files to understand their purposes:

● Read(teleclaude/daemon.py)
  ⎿  Read 50 lines

● Read(teleclaude/mcp_server.py)
  ⎿  Read 50 lines

● Read(teleclaude/core/adapter_client.py)
  ⎿  Read 50 lines

● Read(teleclaude/adapters/telegram_adapter.py)
  ⎿  Read 50 lines

● Read(teleclaude/adapters/redis_adapter.py)
  ⎿  Read 50 lines

● Read(teleclaude/core/db.py)
  ⎿  Read 50 lines

● Read(teleclaude/core/terminal_bridge.py)
  ⎿  Read 50 lines

● Read(teleclaude/config.py)
  ⎿  Read 50 lines

● Based on my analysis of the TeleClaude project, here are the main Python
  files and their purposes:

  Core Entry Points

  teleclaude/daemon.py - Main daemon that coordinates all components.
  Initializes adapters, subscribes to events, manages polling, and handles
  PID file locking. This is the central orchestrator of the entire system.

  teleclaude/mcp_server.py - MCP (Model Context Protocol) server that
  exposes TeleClaude functionality to Claude Code. Enables AI-to-AI
  communication across computers using transport adapters.

  teleclaude/rest_api.py - FastAPI-based REST API for HTTP access (future
  public HTTPS links)

  Core Business Logic (teleclaude/core/)

  adapter_client.py - Central hub for ALL adapter operations. Manages
  multiple adapters (Telegram, Redis) and provides a unified,
  adapter-agnostic API. All daemon/MCP operations flow through this client.

  db.py - Database manager using aiosqlite. Handles session persistence and
  retrieval. Module-level singleton pattern (from teleclaude.core.db import 
  db).

  terminal_bridge.py - tmux session management. Stateless functions for
  creating sessions, sending keys, capturing output.

  command_handlers.py - Command routing logic (e.g., /new_session,
  /list_sessions)

  message_handler.py - Handles user messages from adapters

  terminal_executor.py - Terminal command execution logic

  event_handlers.py - Event handling logic using observer pattern

  output_poller.py - Polls tmux output every 1s and streams to adapters

  polling_coordinator.py - Coordinates output polling across sessions

  session_lifecycle.py - Session creation and management

  models.py - Data classes (Session, Recording)

  events.py - Event type definitions (MESSAGE, NEW_SESSION, etc.)

  protocols.py - Protocol definitions for adapter capabilities
  (RemoteExecutionProtocol)

  voice_handler.py & voice_message_handler.py - Voice message transcription
  using Whisper

  ux_state.py - UX state management (message IDs for editing)

  computer_registry.py - Tracks available computers via Redis heartbeats

  metadata.py - Adapter metadata utilities

  Adapters (teleclaude/adapters/)

  base_adapter.py - Abstract base class defining adapter interface

  ui_adapter.py - Base class for UI adapters (has_ui=True)

  telegram_adapter.py - Telegram Bot API implementation. Interactive UI
  adapter for users.

  redis_adapter.py - Redis Streams implementation for AI-to-AI
  communication. Pure transport layer (has_ui=False). Implements
  RemoteExecutionProtocol.

  Configuration & Utilities

  config.py - Global configuration management. Loads config.yml with
  environment variable expansion.

  logging_config.py - Logging setup

  utils/__init__.py - Utility functions (retry logic, env var expansion,
  etc.)

  Key Architecture Patterns

  1. Observer Pattern - AdapterClient emits events, daemon subscribes (no
  circular dependencies)
  2. Module-Level Singleton - db accessed via import everywhere
  3. Protocol-Based Capabilities - RemoteExecutionProtocol for
  cross-computer features
  4. Origin/Observer Broadcasting - One interactive adapter + read-only
  observers
  5. Event-Driven - Adapters emit events, daemon reacts

  Done

────────────────────────────────────────────────────────────────────────────────
>  
────────────────────────────────────────────────────────────────────────────────
   cwd: /home/morriz/apps/TeleClaude ...
  ⏵⏵ bypass permissions on (shift+tab to cycle)



