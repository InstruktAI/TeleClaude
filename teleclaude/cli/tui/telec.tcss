/* TeleClaude TUI global stylesheet
 *
 * Agent colors are available as CSS variables:
 *   $claude-subtle, $claude-muted, $claude-normal, $claude-highlight
 *   $gemini-subtle, $gemini-muted, $gemini-normal, $gemini-highlight
 *   $codex-subtle,  $codex-muted,  $codex-normal,  $codex-highlight
 *
 * Structural variables:
 *   $connector, $separator, $input-border, $banner-color, $status-fg
 */

TelecApp {
    background: transparent;
}

Screen {
    background: $background;
}

/* ── Global hover/focus/active suppression ────────────── */
/* Kill Textual default interaction backgrounds on tree widgets.
   Modal form elements (#modal-box inputs/buttons) keep focus. */
Widget:hover {
    background: transparent;
}

Widget:focus {
    background: transparent;
}


/* Suppress focus-within propagation on structural containers.
   Focus flows inward (views get focused) — parent containers should not
   react visually. Scoped to our containers; future rich-content widgets
   (markdown editor, etc.) are not affected. */
SessionsView:focus-within,
PreparationView:focus-within,
JobsView:focus-within,
ConfigView:focus-within,
TabPane:focus-within,
TabbedContent:focus-within,
ContentSwitcher:focus-within {
    background: transparent;
}

/* Restore focus indicators inside modals */
#modal-box Button:focus {
    background: $panel;
    text-style: bold;
    border: round $connector;
}

#modal-box Input:focus {
    background: $surface;
    border: round $connector;
}

#modal-box Select:focus {
    background: $surface;
    border: round $connector;
}

/* ── Banner ────────────────────────────────────────────── */
Banner {
    height: 6;
    width: 100%;
    content-align: left middle;
}

/* ── Tab bar ───────────────────────────────────────────── */
/* Hide Textual's built-in tab bar — replaced by BoxTabBar */
#main-tabs {
    height: 1fr;
}

Tabs {
    display: none;
}

TabbedContent > ContentSwitcher {
    height: 1fr;
}

TabPane {
    height: 1fr;
    padding: 0;
    background: transparent;
}

ContentSwitcher {
    background: transparent;
}

TabbedContent {
    background: transparent;
}

/* ── Views fill their tab panes ────────────────────────── */
SessionsView {
    width: 100%;
    height: 1fr;
}

PreparationView {
    width: 100%;
    height: 1fr;
}

JobsView {
    width: 100%;
    height: 1fr;
}

ConfigView {
    width: 100%;
    height: 1fr;
}

/* ── Footer ────────────────────────────────────────────── */
#footer-area {
    dock: bottom;
    height: 2;
}

Footer {
    height: 1;
    background: $panel;
    color: $foreground;
}

FooterKey .footer-key--key {
    text-style: bold;
    color: $connector;
}

FooterKey .footer-key--description {
    color: $foreground;
}

FooterKey.default-action .footer-key--key,
FooterKey.default-action .footer-key--description {
    text-style: bold;
}

StatusBar {
    height: 1;
}

/* ── Session tree rows ─────────────────────────────────── */
/* Selection colors handled by render() for agent-specific styling.
   Prevent Textual defaults from painting backgrounds. */
SessionRow {
    width: 100%;
    height: auto;
    padding: 0 1;
    background: transparent;
}

SessionRow:hover {
    background: transparent;
}

SessionRow:focus {
    background: transparent;
}

SessionRow.selected {
    background: transparent;
}

/* Computer and project headers */
ComputerHeader {
    width: 100%;
    height: auto;
    padding: 0 1;
    background: transparent;
}

ComputerHeader.selected {
    background: transparent;
}

ProjectHeader {
    width: 100%;
    height: auto;
    padding: 0 1;
    background: transparent;
}

ProjectHeader.selected {
    background: transparent;
}

/* ── Todo rows ─────────────────────────────────────────── */
TodoRow {
    width: 100%;
    height: auto;
    padding: 0 1;
    background: transparent;
}

TodoRow.selected {
    background: transparent;
}

/* ── Job rows ──────────────────────────────────────────── */
JobRow {
    width: 100%;
    height: 1;
    padding: 0 1;
    background: transparent;
}

JobRow.selected {
    background: transparent;
}

/* ── Section headers ───────────────────────────────────── */
SectionHeader {
    width: 100%;
    height: 1;
    padding: 0 1;
}

/* ── Pane bridge (invisible) ───────────────────────────── */
PaneManagerBridge {
    display: none;
}

/* ── Scroll containers ─────────────────────────────────── */
VerticalScroll {
    scrollbar-size: 0 0;
    background: transparent;
}

VerticalScroll:hover {
    background: transparent;
}

VerticalScroll:focus {
    background: transparent;
}

VerticalScroll:focus-within {
    background: transparent;
}

/* ── Global button styling ─────────────────────────────── */
Button {
    background: $panel;
    color: $foreground;
    border: round $input-border;
    min-width: 10;
}

Button:hover {
    background: $panel;
    border: round $connector;
}

Button:focus {
    border: round $connector;
    text-style: bold;
}

Button.-primary {
    background: $panel;
    color: $foreground;
    border: round $connector;
}

Button.-primary:hover {
    background: $panel;
}

/* ── Global input styling ──────────────────────────────── */
Input {
    background: $surface;
    color: $foreground;
    border: round $input-border;
}

Input:focus {
    border: round $connector;
}

/* ── Global select styling ─────────────────────────────── */
Select {
    background: $surface;
    border: round $input-border;
}

Select:focus {
    border: round $connector;
}

SelectOverlay {
    background: $panel;
    color: $foreground;
    border: round $connector;
}

SelectCurrent {
    background: $surface;
    color: $foreground;
}

/* ── Global label styling ──────────────────────────────── */
Label {
    color: $foreground;
}

/* ── Toast notifications ───────────────────────────────── */
ToastRack {
    align: center top;
}

Toast {
    background: $panel;
    color: $foreground;
    border: round $input-border;
    padding: 1 2;
}

Toast.-information {
    background: $panel;
    color: $foreground;
    border: round $connector;
}

Toast.-warning {
    background: #3a3520;
    color: $warning;
    border: round #8a7530;
}

Toast.-error {
    background: #3a2020;
    color: $error;
    border: round #8a3030;
}

Toast .toast--title {
    color: $foreground;
    text-style: bold;
}

/* ── Modals ────────────────────────────────────────────── */
/* Single thin border with title on top border line */

ConfirmModal, StartSessionModal {
    align: center middle;
}

#modal-box {
    height: auto;
    border: round $connector;
    border-title-color: $foreground;
    border-title-style: bold;
    background: $panel;
    padding: 1 2;
}

/* ── ConfirmModal ─────────────────────────────────────── */

ConfirmModal #modal-box {
    width: 52;
    max-height: 14;
}

ConfirmModal #confirm-message {
    margin: 0 0 0 0;
}

/* ── StartSessionModal ────────────────────────────────── */

StartSessionModal #modal-box {
    width: 64;
    max-height: 32;
}

StartSessionModal #modal-computer,
StartSessionModal #modal-project {
    color: $foreground;
}

/* Field groups: thin border with title on border line */
#agent-group,
#mode-group,
#prompt-group,
#title-group {
    border: round $input-border;
    border-title-color: $foreground;
    border-title-style: bold;
    height: auto;
    margin: 1 0 0 0;
    padding: 0;
}

#agent-group:focus-within,
#mode-group:focus-within,
#prompt-group:focus-within,
#title-group:focus-within {
    border: round $connector;
}

/* Custom horizontal selectors */
AgentSelector, ModeSelector {
    height: 1;
    width: 100%;
    background: transparent;
}

/* Inputs inside field groups */
StartSessionModal Input {
    width: 100%;
    border: none;
    background: transparent;
}

StartSessionModal Input:focus {
    border: none;
}

/* Action buttons row */
#modal-actions {
    height: auto;
    margin: 1 0 0 0;
}

#modal-actions Button {
    width: 1fr;
    margin: 0 1 0 0;
}

#cancel-hint {
    width: auto;
    margin: 0 0 0 1;
    color: $foreground 50%;
}
