# Artifact Consistency — Process & Tooling Friction

**ID:** 20260219-artifact-consistency-guards
**Status:** Idea
**Severity:** Medium
**Frequency:** Recurring (reported 2026-02-09)

## The Problem

Two recurring friction patterns surface around artifact consistency:

1. **AGENTS.md edits** (#24):
   - AGENTS.md is a GENERATED artifact built from AGENTS.master.md by `distribute.py`
   - AIs repeatedly edit AGENTS.md directly instead of the source
   - This is stated explicitly in CLAUDE.md baseline but still fails
   - Root cause: the .master.md relationship is not obvious from the file alone

2. **Transitional state descriptions** (#22):
   - Artifacts describe the target state — what we are building — never the transitional state
   - No "not yet implemented", no "legacy", no "will be migrated"
   - AIs repeatedly write transitional state descriptions as if they are current fact
   - This pollutes artifacts with implementation status noise instead of architecture

### Evidence

- Memory #24: "This was explicitly stated in the CLAUDE.md baseline but I failed to internalize it"
- Memory #22: "This is a recurring friction point that keeps resurfacing"
- Implies pattern observed across multiple agent sessions over time

## Root Cause

- **Silent artifact types:** No visual or syntactic marker distinguishing generated from source
- **Implicit discipline:** Requires knowledge of `distribute.py` to understand the relationship
- **Documentation vs. architecture blur:** No clear rule about what artifacts describe (current state vs. plan)
- **No enforcement:** Nothing prevents editing generated artifacts or writing transitional state

## Solutions to Explore

1. **Artifact detection automation** (near-term)
   - Add pre-commit hook: reject AGENTS.md edits, require edits to AGENTS.master.md
   - Lint rule: flag "not yet", "legacy", "will be", "planned for" in spec/policy/design files
   - File header guard: generated artifacts include `<!-- Generated by distribute.py -->` or similar

2. **Documentation clarity** (near-term)
   - Refresh CLAUDE.md with visual examples of .master.md vs. generated patterns
   - Add checklist to artifact authoring: "Is this current state or implementation plan?"
   - Create lint rules enforceable in CI

3. **Tooling enhancement** (medium-term)
   - `distribute.py` enhancement: mark all generated files with a `.generated` marker or header
   - Editor support: VSCode extension or file associations that flag generated artifacts
   - `telec sync` command: validate no generated files were edited; error if found

## Impact

- **Discipline:** Removes the cognitive burden of remembering artifact types
- **Clarity:** Generated vs. source becomes visible and enforced
- **Consistency:** Architecture descriptions stay clean; implementation history stays in git log

## Related

- Memory #24: "AGENTS.md is generated artifact"
- Memory #22: "Artifacts describe target state, never transition state"
- CLAUDE.md baseline: "Never edit AGENTS.md directly"
- Agent Artifact Distribution procedure

## Next Step

Recommend pre-commit hook + linting as immediate enforcement; follow with tooling enhancement for scalability.
